<script src="data.js"></script>
<script>
    // This imports an array of user objects. Take a look at them in the console.
    console.log(users);
<<<<<<< HEAD

    /*
=======

//    var notNullUsers = users.filter(function(user){
//        return user.age != null;
//    });
//
//    console.log(users.length);
//    console.log(notNullUsers.length);

    console.log("Check Birthday -----");
    var today = new Date();
    console.log(users.filter(function(user){
        var bDay = new Date(user.date * 1000);
        return today.getMonth() === bDay.getMonth() && today.getDate() === bDay.getDate();
    }));
    console.log("-----");




    function Widget(a, b, c) {
        this.a = a;
        this.b = b;
        this.c = c;
    }


    var q = "7";
    var u = 7;

    console.log(q == u); // true
    console.log(q === u); // false


    var r = null;
    var t = "aaa" * 36;


    // prototype = {start: function(){}, ... }
    Widget.prototype.start = function() {
        console.log(this.c.name + " started");
    }

    Widget.prototype.Cog = Cog;

    function Cog() {

    }

    Cog.prototype.spin = function() {

    }


    var w = new Widget(1,2,{name:"Joe", age: 33});
    console.log(w);
    w.start();

    var x = new Widget(11,22,{name:"X"});
    x.special = 99;
    console.log(x);






    var date = new Date("1473818524" * 1000);

    console.log(typeof today);

    console.log(today);
    console.log(date);
    console.log(today.getFullYear());
    console.log(date.getYear());
    console.log(today.getDay());
    console.log(today.getDate());
    console.log(today.getMonth());
    console.log(formatDay(today.getDay()));
    console.log(formatMonth(today.getMonth()));

    function formatDay(day) {
        return ["Sun", "Mon", "Tues", "Wed", "Thurs", "Fri", "Sat"][day];
    }

    Date.prototype.formatDay = formatDay;

    function formatMonth(month) {
        return ["Jan", "Feb", "Mar", "April", "May", "June", "July", "Aug", "Sept", "Oct", "Nov", "Dec"][month];
    }

    function fomratDate(date) {
        var day = formatDay(date.getDay());
        var month = formatMonth(date.getMonth());
        var d = date.getDate()
        return month + " " + day + ' the ' + d;
    }

    /*
>>>>>>> 690b60b4f9b7c1a210402de6b0f1ae1040576faa
        The each user object has properties of:

        - age (Number)
        - date (String UTC timestamp)
        - first_name (String)
        - last_name (String)
        - gender (String: Male or Female)
        - id (Number)
    */

    // Challenges

    // - Filter
    // All users above age 30
    function filterUsersByAge(age, lessThanOrEqualTo) {
        //age is the age to filter by
        //lessThanOrEqualTo true for less than or equal to that age; false if greater than or equal to
        var filteredUsers = [];

        if (lessThanOrEqualTo === true) {
            filteredUsers = users.filter(function(user) {
                return user.age <= age;
            });
        }
        else {
            filteredUsers = users.filter(function(user) {
                return user.age >= age;
            });
        }
        return filteredUsers;
    }
    // All male users between 18 and 30
    function male18to30() {
        var filteredUsers = users.filter(function(user) {
            return user.gender == "Male" && user.age <= 30 && user.age >= 18;
        });
        return filteredUsers;
    }
    // All female users who joined after 2016 (all dates 2017)
    function femaleAfter2016() {
        var filteredUsers = users.filter(function(user) {
            if (user.date != null) {
                var userDate = new Date(user.date * 1000);
                return user.gender == "Female" && userDate.getFullYear() > 2016;
            }
            return false;
        });
        return filteredUsers;
    }
    // Imagine the date is a birthday. Find all the users who's birthday is today.
    function todayBirthday() {
        var currentDate = new Date();
        var filteredUsers = users.filter(function(user) {
            if (user.date != null) {
                var userDate = new Date(user.date * 1000);
                return userDate.getMonth() == currentDate.getMonth() && userDate.getDay() == currentDate.getDay();
            }
            return false;
        });
        return filteredUsers;
    }

    // - Map
    // Display user Name first and last
    function userFullNames() {
        var mappedUsers = users.map(function(user) {
                return user.first_name + " " + user.last_name
        });
        return mappedUsers;
    }
    // Display first name and date formatted: mm/dd/yy
    function firstNameAndDate() {
        var currentDate = new Date();
        var mappedUsers = users.map(function(user) {
            if (user.date != null) {
                var userDate = new Date(user.date * 1000);
                return user.first_name + " " + userDate.getMonth() + "/" + userDate.getDay() + "/" + userDate.getFullYear();
            }
            else {
                return user.first_name + " No Date";
            }
        });
        return mappedUsers;
    }
    // Display male users as: First, Last, gender, age
    function maleUsers() {
        var mappedUsers = users.map(function(user) {
            if(user.gender == "Male") {
                return user.first_name + " " + user.last_name + " " + user.gender +  " " + user.age
            }
            return false
        });
        return mappedUsers;
    }
    // Display users whos birthday is today as: Happy Birthday firstName lastName
    function birthdayWish() {
        var currentDate = new Date();
        var mappedUsers = users.map(function(user) {
            if (user.date != null) {
                var userDate = new Date(user.date * 1000);
                if (userDate.getMonth() == currentDate.getMonth() && userDate.getDay() == currentDate.getDay()) {
                    return "Happy Birthday " + user.first_name + " " + user.last_name;
                }
            }
            return false;
        });
        return mappedUsers;
    }
    // Reduce
    // Average the age of all users
<<<<<<< HEAD
    function avgUserAge() {
        // Count the number of users whose age is null
        var nullAgeCount = 0
        var userAge = users.reduce(function(total, user) {
            if (user.age == null) {
                nullAgeCount += 1;
                return total
            }
            else {
                return total = total + user.age;
            }
        }, 0);
        var avgAge = userAge / (users.length - nullAgeCount);
        return avgAge;
    }

    // Extra Challenges
    // Imagine the date is the date joined. Calculate the number of total hours all since all users have joined.
    // Sort all users by gender
    function genderUsers() {

        var maleUsers = [];
        var femaleUsers = [];

        var mappedUsers = users.map(function(user) {
            if(user.gender == "Male") {
                return maleUsers.push(user)
            }
            else if (user.gender == "Female") {
                return femaleUsers.push(user)
            }
            else {
                return false;
            }
        });

        return maleUsers.concat(femaleUsers);
    }

    //or
    //users.sort

    // Sort all users by age
    function sortByAge() {
        return users.sort(function(a, b) {
            return a.age - b.age;
        });
    }

</script>
